<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>无标题文档</title>
    <style type="text/css">
        img {
            display: block;
            margin: 10px;
            border: none;
            width: 300px;
            height: 300px;
        }
    </style>
</head>

<body>


<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<img realSrc="http://pic1.win4000.com/pic/9/8c/0a08466924.jpg" src="default.gif">
<img realSrc="http://pic1.win4000.com/pic/9/8c/0a08466925.jpg" src="default.gif">
<img realSrc="http://pic1.win4000.com/pic/9/8c/0a08466926.jpg" src="default.gif">
<img realSrc="http://pic1.win4000.com/pic/9/8c/0a08466927.jpg" src="default.gif">
<img realSrc="http://pic1.win4000.com/pic/9/8c/0a08466928.jpg" src="default.gif">
<img src="default.gif">
</body>
</html>

<script>
    function offset(ele) {
        var l = ele.offsetLeft;
        var t = ele.offsetTop;
        var p = ele.offsetParent;
        while (p) {//判断ele是否有offsetParent(偏移参照物)
            l += p.offsetLeft + p.clientLeft;
            t += p.offsetTop + p.clientTop;
            p = p.offsetParent;
        }
        return {l: l, t: t};
    }

    //var oImgs=document.images;//DHTML 五百年前（老年间的）表达网页结构的属性（方式）
    var oImgs = document.getElementsByTagName("img");
    for (var i = 0; i < oImgs.length; i++) {
        var oImg = oImgs[i];
        oImg.t = offset(oImg).t;
    }
    window.onscroll = function () {
        var h = (document.documentElement.scrollTop || document.body.scrollTop) + (document.documentElement.clientHeight || document.body.clientHeight);
        for (var i = 0; i < oImgs.length; i++) {
            var oImg = oImgs[i];
            if (oImg.loaded)continue;
            ;(function (i) {
                if (h > oImgs[i].t + oImgs[i].offsetHeight) {
                    oImgs[i].src = "o_loading.gif";
                    var imgTemp = new Image;
                    imgTemp.src = oImgs[i].getAttribute("realSrc") + "?" + Math.random();
                    console.log(imgTemp.src);//加调试用的代码
                    imgTemp.onload = function () {
                            oImg.src = this.src;
                            console.log(this.src);//加调试用的代码

                        }

                    }
        })(i)
        }
    }
    </script>